<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8"> 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>





<STYLE>
#winner {
font-family: "Arial Black", Gadget, sans-serif;
font-size: 31px;
letter-spacing: 2px;
word-spacing: 2px;
color: #000000;
font-weight: 700;
text-decoration: none;
font-style: normal;
font-variant: normal;
text-transform: none;
}
</STYLE>
<SCRIPT>


nplayers=15;
function parseData(tag) {

document.getElementById('loading').innerHTML='<b>searching...</b>';

var settings = {
  "async": true,
  "crossDomain": true,
  "dataType": "json",
  "url": "https://api.royaleapi.com/tournament/"+tag,
  "method": "GET",
  "headers": {
    "auth": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTQ2LCJpZGVuIjoiMjAwODYxMjAzNDQ5MzgwODc0IiwibWQiOnsidXNlcm5hbWUiOiJvIHBhcHBvdXMiLCJrZXlWZXJzaW9uIjozLCJkaXNjcmltaW5hdG9yIjoiNDI3OCJ9LCJ0cyI6MTU0NDI4NjYzNzg1Mn0.5n7hKFc4JbMRoQq2-JYhKAdnBnXD8BCUrcDm5sSnDoQ"
  }
}

$.ajax(settings).done(function (response) {
  //console.log(response)
  //console.log(response['members'][0]['name']);

document.getElementById('loading').innerHTML=''
for (i = 0; i < nplayers; i++) { 
  document.getElementById('input'+(i+1)).value='';
}
for (i = 0; i < nplayers; i++) { 

  if (response['members'][i]['clan'] !== null) {
    document.getElementById('input'+(i+1)).value=response['members'][i]['name'] + ' - ' +response['members'][i]['clan']['name']; 
  }
  else {
    document.getElementById('input'+(i+1)).value=response['members'][i]['name'];
  }
}


});



}



function calculateweights() {
k=0;
s=document.getElementById('weightrange').value;
if (s==1) {p=1;}
if (s==2) {p=2;}
if (s==3) {p=4;}
min=parseInt(nplayers)+1
max=1
result= min-Math.floor(min + (max - min) * Math.pow(Math.random(), p));
document.getElementById('winner').innerHTML='The Winner is:<BR>'+document.getElementById('input'+result).value;
}
function sliderlegend() {
s=document.getElementById('weightrange').value;
if (s==1) {document.getElementById('slidertext').innerHTML='same chance for all';}
if (s==2) {document.getElementById('slidertext').innerHTML='normal';}
if (s==3) {document.getElementById('slidertext').innerHTML='boost top players';}
}
function playercount(n) {
nplayers=n;
if (n==5) {

document.getElementById('input6').value=''
document.getElementById('input7').value=''
document.getElementById('input8').value=''
document.getElementById('input9').value=''
document.getElementById('input10').value=''
document.getElementById('input11').value=''
document.getElementById('input12').value=''
document.getElementById('input13').value=''
document.getElementById('input14').value=''
document.getElementById('input15').value=''
document.getElementById('input16').value=''
document.getElementById('input17').value=''
document.getElementById('input18').value=''
document.getElementById('input19').value=''
document.getElementById('input20').value=''
}
if (n==10) {

document.getElementById('input11').value=''
document.getElementById('input12').value=''
document.getElementById('input13').value=''
document.getElementById('input14').value=''
document.getElementById('input15').value=''
document.getElementById('input16').value=''
document.getElementById('input17').value=''
document.getElementById('input18').value=''
document.getElementById('input19').value=''
document.getElementById('input20').value=''
}
if (n==15) {

document.getElementById('input16').value=''
document.getElementById('input17').value=''
document.getElementById('input18').value=''
document.getElementById('input19').value=''
document.getElementById('input20').value=''
}

}
</SCRIPT>

<h1>Taskempap Tour Winner Pickup!</h1>

<div class="container">

<input type="radio" name="YesNo" value="5" onclick="playercount(this.value);">5 players<br>
<input type="radio" name="YesNo" value="10" onclick="playercount(this.value);">10 players<br>
<input type="radio" name="YesNo" value="15" checked onclick="playercount(this.value);">15 players<br>
<input type="radio" name="YesNo" value="20" onclick="playercount(this.value);">20 players<br>
<br>

<div style="width:400px">
enter tournament tag: <input type="test" id="tourtag" value="V2CY88Q"</input><button type=button onclick="parseData(document.getElementById('tourtag').value);">Get Players!</button><div style="float:right" id="loading"></div><BR><BR>


Algorithm:<div id="slidertext">normal</div>
<div class="slidecontainer">
<input type="range" min="1" max="3" value="2" step="1" class="slider" id="weightrange" onchange="sliderlegend()">
</div>

<button type=button onclick="calculateweights()">Get Winner!</button>


<div  id="winner"></div><BR>
</div>
<BR>
<div class="container">
<input type="text" id="input1" value="" ></input><BR>
<input type="text" id="input2" value="" ></input><BR>
<input type="text" id="input3" value="" ></input><BR>
<input type="text" id="input4" value="" ></input><BR>
<input type="text" id="input5" value="" ></input><BR>
<input type="text" id="input6" value="" ></input><BR>
<input type="text" id="input7" value="" ></input><BR>
<input type="text" id="input8" value="" ></input><BR>
<input type="text" id="input9" value="" ></input><BR>
<input type="text" id="input10" value="" ></input><BR>
<input type="text" id="input11" value="" ></input><BR>
<input type="text" id="input12" value="" ></input><BR>
<input type="text" id="input13" value="" ></input><BR>
<input type="text" id="input14" value="" ></input><BR>
<input type="text" id="input15" value="" ></input><BR>
<input type="text" id="input16" value="" ></input><BR>
<input type="text" id="input17" value="" ></input><BR>
<input type="text" id="input18" value="" ></input><BR>
<input type="text" id="input19" value="" ></input><BR>
<input type="text" id="input20" value="" ></input><BR>

</div>



</div>
</html>
